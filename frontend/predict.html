<html>
	<head>
		<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
	</head>
	<body>
	<p>Loading...</p>
	<script>


function findGetParameter(parameterName) {
    var result = null,
        tmp = [];
    location.search
        .substr(1)
        .split("&")
        .forEach(function (item) {
          tmp = item.split("=");
          if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
        });
    return result;
}

function erstelleDiagramm(values) {
	border=1;
	width=50;
	function bar(high,val){
		document.writeln("<td valign=bottom>",high,
		   "<table bgcolor=#191970 border=",border," height=",high,
		   " width=",width,
		   " cellpadding=0 cellspacing=0>",
		   "<tr><td align=center valign=bottom>",
		   "<font color=#D4D4D4     size=-1 >",val,"</font>",
		   "</td></tr></table></td>")
	}
	document.writeln("<table bgcolor=#a0a0a0 height=400 width=",
	 500," border=",border," >");
	 
	for (key in values)
	{
		console.log("adding...")
		bar(Math.round(values[key]*100, 5), key.replace("Die Linke", "Links"))
	}

	document.writeln("</table>");
}

var calling = "http://profile-o-mat.de:8080/predict?user=" + findGetParameter("name");
console.log(calling);

$.ajax({
  url: calling,
  context: document.body
}).done(function(html) {
  console.log("GOT RESPONSE");
  console.log(html);
  erstelleDiagramm(html);
});
	</script>		
	</body>
</html>
